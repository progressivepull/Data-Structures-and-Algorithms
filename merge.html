<!DOCTYPE html>
<html>
<head>
  <title>Merge Analogy Visualization</title>
  <style>
    canvas {
      border: 1px solid black;
      margin-top: 10px;
    }
    #explanation {
      margin-top: 10px;
      font-family: sans-serif;
    }
  </style>
</head>
<body>
  <h2>Merge Analogy: Step-by-Step</h2>
  <button onclick="stepMerge()">Next Step</button>
  <div id="explanation">Click "Next Step" to begin merging.</div>
  <canvas id="mergeCanvas" width="600" height="200"></canvas>

  <script>
    const canvas = document.getElementById('mergeCanvas');
    const ctx = canvas.getContext('2d');

    const left = [1, 3, 5];
    const right = [2, 4, 6];
    let merged = [];
    let i = 0, j = 0;
    let step = 0;

    function drawBoxes() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Draw left array
      left.forEach((val, idx) => {
        drawBox(val, 50 + idx * 60, 30, i > idx ? '#ccc' : '#add8e6');
      });

      // Draw right array
      right.forEach((val, idx) => {
        drawBox(val, 50 + idx * 60, 90, j > idx ? '#ccc' : '#90ee90');
      });

      // Draw merged array
      merged.forEach((val, idx) => {
        drawBox(val, 50 + idx * 60, 150, '#ffcccb');
      });
    }

    function drawBox(value, x, y, color) {
      ctx.fillStyle = color;
      ctx.fillRect(x, y, 50, 30);
      ctx.strokeRect(x, y, 50, 30);
      ctx.fillStyle = 'black';
      ctx.fillText(value, x + 20, y + 20);
    }

    function stepMerge() {
      if (i < left.length && (j >= right.length || left[i] <= right[j])) {
        merged.push(left[i]);
        document.getElementById('explanation').innerText = `Step ${++step}: Take ${left[i]} from left`;
        i++;
      } else if (j < right.length) {
        merged.push(right[j]);
        document.getElementById('explanation').innerText = `Step ${++step}: Take ${right[j]} from right`;
        j++;
      } else {
        document.getElementById('explanation').innerText = `Merge complete!`;
      }
      drawBoxes();
    }

    drawBoxes(); // Initial draw
  </script>
</body>
</html>
